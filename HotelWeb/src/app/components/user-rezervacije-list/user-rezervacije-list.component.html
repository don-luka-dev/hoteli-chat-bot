<div class="p-6 max-w-5xl mx-auto">
  <div class="flex items-center justify-between">
    <h2 class="text-xl md:text-2xl font-semibold">Moje rezervacije</h2>
    <button pButton severity="secondary" class="rounded-2xl" (click)="reload()">Osvježi</button>
  </div>

  <div class="mt-4 bg-white rounded-2xl shadow-sm">
    @if (loading()) {
    <div class="flex items-center justify-center py-16">
      <p-progressSpinner styleClass="w-10 h-10" ariaLabel="Učitavanje"></p-progressSpinner>
    </div>
    } @else {
    @if (error()) {
    <div class="p-4 text-red-600">{{ error() }}</div>
    } @else {
    @if (rezervacije().length === 0) {
    <div class="p-6 text-slate-600">Trenutno nemaš nijednu rezervaciju.</div>
    } @else {
    <p-table [value]="rezervacije()" [rowHover]="true" [stripedRows]="true" [tableStyle]="{ 'min-width': '68rem' }"
      class="rounded-2xl overflow-hidden">
      <ng-template pTemplate="header">
        <tr>
          <th>Period</th>
          <th>Noćenja</th>
          <th>Soba</th>
          <th>Napomena</th>
          <th>Kreirano</th>
          <th>Status</th>
          <th class="text-right pr-4">Akcije</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-r>
        <tr>
          <td class="font-medium">{{ r.dateRange }}</td>
          <td>{{ r.nights }}</td>
          <td>
            <div class="flex items-center gap-2">
              <span class="px-2 py-1 rounded-xl bg-slate-100 text-slate-700 text-sm">#{{ r.sobaId }}</span>
              <!-- If you have a room details route, make it a link: [routerLink]="['/sobe', r.sobaId]" -->
            </div>
          </td>
          <td class="text-slate-700">
            {{ r.napomena || '—' }}
          </td>
          <td class="text-slate-700">{{ r.created }}</td>
          <td>
            <p-tag [value]="labelFor(r.status)" [severity]="severityFor(r.status)"></p-tag>
          </td>
          <td class="text-right pr-4">
            <button 
            pButton severity="danger" 
            icon="pi pi-trash" 
            class="rounded-xl" 
            (click)="onDelete(r.sobaId, r.id)">
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
    }
    }
    }
  </div>
</div>