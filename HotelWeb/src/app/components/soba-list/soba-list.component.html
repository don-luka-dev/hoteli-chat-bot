<div class="p-6 max-w-5xl mx-auto" (window:scroll)="onScroll()">
  <h2 class="text-3xl font-bold text-gray-900 mb-6 border-b pb-2 flex items-center">
    <i class="pi pi-bed !text-[2rem] text-indigo-600 mr-3"></i>
    Popis soba
  </h2>

  <button
    pButton
    icon="pi pi-sliders-h"
    label="Filteri"
    class="mb-4"
    [severity]="'info'"
    (click)="toggleFilters()">
  </button>

  @if (showFilters()) {
    <div
      class="p-4 mb-5 bg-white shadow rounded-2xl grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Hotel</label>
        <p-select
          [options]="hoteli()"
          optionLabel="naziv"
          optionValue="id"
          placeholder="Odaberi hotel"
          [formControl]="hotelId"
          class="w-full">
        </p-select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Broj kreveta</label>
        <p-inputNumber
          [formControl]="brojKreveta"
          [min]="1"
          [useGrouping]="false"
          inputId="brojKreveta"
          class="w-full">
        </p-inputNumber>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Cijena min (€)</label>
        <p-inputNumber
          [formControl]="cijenaMin"
          [min]="0"
          [useGrouping]="false"
          inputId="cijenaMin"
          class="w-full">
        </p-inputNumber>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Cijena max (€)</label>
        <p-inputNumber
          [formControl]="cijenaMax"
          [min]="0"
          [useGrouping]="false"
          inputId="cijenaMax"
          class="w-full">
        </p-inputNumber>
      </div>
    </div>
  }

  @if (sobe().length > 0) {
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      @for (s of sobe(); track s.id) {
        <a
          class="cursor-pointer bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-lg transition-shadow"
          [routerLink]="['/sobe', s.id]">
          <img
            [src]="s.urlSlike"
            alt="Slika sobe"
            class="w-full h-48 object-cover" />
          <div class="p-4 space-y-1">
            <h3 class="text-lg font-bold text-gray-800">{{ s.naziv }}</h3>
            <p class="text-sm text-gray-600">Hotel: {{ s.hotelNaziv }}</p>
            <p class="text-sm text-gray-600">Kreveta: {{ s.brojKreveta }}</p>
            <p class="text-sm text-gray-600">
              Cijena: {{ s.cijenaNocenja }} € / noć
            </p>
          </div>
        </a>
      }
    </div>

    @if (loading()) {
      <div class="text-center py-4 text-gray-500">Učitavanje…</div>
    }

    @if (!hasMore() && !loading()) {
      <div class="text-center py-4 text-gray-400 text-sm">
        Nema više rezultata
      </div>
    }
  } @else {
    <p class="text-sm text-gray-500">Nema soba za prikaz.</p>
  }
</div>
