<div class="p-6 max-w-5xl mx-auto">
  <p-toolbar class="rounded-2xl shadow-sm">
    <div class="p-toolbar-group-start flex items-center gap-3">
      <span class="text-xl font-semibold">Korisnici</span>
    </div>
    <div class="p-toolbar-group-end flex items-center gap-3">
      <span class="font-medium hidden md:inline">Filtriraj po korisni훾kom imenu</span>
      <input pInputText [formControl]="usernameControl" placeholder="npr. donluka" class="w-64 rounded-xl"
        type="text" />
      <button severity="info" pButton class="rounded-xl" (click)="refresh()">Osvje탑i</button>
    </div>
  </p-toolbar>

  <div class="mt-4 bg-white rounded-2xl shadow-sm p-4">
    @if (loading()) {
    <div class="flex items-center justify-center py-16">
      <p-progressSpinner styleClass="w-10 h-10" ariaLabel="U훾itavanje"></p-progressSpinner>
    </div>
    } @else {
    @if (users().length === 0) {
    <div class="text-center text-slate-500 py-12">
      Nema podataka za prikaz.
    </div>
    } @else {
    <p-table [value]="users()" [tableStyle]="{ 'min-width': '50rem' }" [rowHover]="true" [stripedRows]="true"
      class="rounded-2xl overflow-hidden">
      <ng-template pTemplate="header">
        <tr>
          <th class="whitespace-nowrap">Korisni훾ko ime</th>
          <th>Ime</th>
          <th>Prezime</th>
          <th>E-mail</th>
          <th>Uloga</th>
          <th>Akcije</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-u>
        <tr class="align-top">
          <td class="font-medium">{{ u.username }}</td>
          <td>{{ u.ime }}</td>
          <td>{{ u.prezime }}</td>
          <td class="text-slate-600">{{ u.email }}</td>
          <td>
            <span class="px-2 py-1 rounded-xl bg-slate-100 text-slate-700 text-sm">{{ u.rola }}</span>
          </td>
           @if(authService.isSuperAdmin()) {
          <td>
           
            <button pButton class="mr-2" severity="info" (click)="onPromote(u.id)">Promote</button>
            <button pButton severity="danger" (click)="onDelete(u.id)">Delete</button>
          </td>
        }
        @else{
          <td>N/A</td>
        }
        </tr>
      </ng-template>
    </p-table>
    }
    }
  </div>
</div>